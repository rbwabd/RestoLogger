<% content_for :sidebar do %>
  <%= render 'layouts/main_sidebar' %>
<% end %>

<h1><%= I18n.t(@title, :store_name => @store.name) %></h1><br>

<!-- 2do: hack because I can't get css class to work -->
<style>
  <% @dishes.keys.each_with_index do |k, c| %>#sortable<%=c%> li <%= if c < @dishes.keys.size-1 then "," end%> <% end %>{ margin: 0 5px 5px 5px; padding: 5px; font-size: 1.2em;}
</style>

<%= form_for(@store, :url => update_menu_path) do |f| %>
  <div class="action">
    <%= f.submit I18n.t(@button) %>
  </div><br>
  <div id="tabssortable">
    <ul>
      <% @dishes.keys.each_with_index do |k, c| %>
        <li id="MyTabs_<%= c %>"><a href="#tabs_<%= c %>"><%= k %></a></li>
      <% end %>
    </ul>
    <% @dishes.keys.each_with_index do |k, c| %>
      <div id="tabs_<%= c %>">
        <ul id="sortable<%= c %>" class="connectedSortable ui-helper-reset">
          <% @dishes[k].each_with_index do |dish, c2| %>
            <li id="catf_<%=c.to_s%>_<%=c2.to_s%>" class="ui-state-default"><%= dish.name %></li>
          <% end %>
        </ul>
      </div>
    <% end %>
  </div>

  <% @dishes.keys.each_with_index do |k, c| %>
    <%= hidden_field_tag "taborder"+c.to_s %>
    <% @dishes[k].each_with_index do |dish, c2| %>
      <%= hidden_field_tag "dishorder_"+c.to_s+"_"+c2.to_s %>
    <% end %>
  <% end %>

  <br><div class="action">
    <%= f.submit I18n.t(@button) %>
  </div>
<% end %>